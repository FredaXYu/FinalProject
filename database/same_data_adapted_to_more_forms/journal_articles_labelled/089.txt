mouse pdac cell line kpc4662 kpc2173 derive primary pancreatic tumour isolate c57bl6j kpc mouse r. h. vonderheide kpc llc e0771 b16ova cell culture complete dmem 11995065 thermo fisher contain 10 heatinactivated fetal bovine serum fbs 1 penicillinstreptomycin 15140122 thermo fisher cell use 16 passage confirm free mycoplasma endotoxin nk92 mi nk cell crl2408 atcc culture memα 12561056 thermo fisher medium contain 10 fbs 1 penicillinstreptomycin 2 mm lglutamine 25030081 thermo fisher 0.1 mm 2mercaptoethanol 10 mm hepes 15630106 thermo fisher 0.1 mm nonessential amino acid 11140050 thermo fisher erythroleukaemic cell line k562 culture complete rpmi1640 medium cell maintain 37 °c 5 co orthotopic intrapancreatic injection kpc cell mouse anaesthetize use mixture ketamine 100 mg kg xylazine 10 mg kg medvet international depth anaesthesia confirm verify absence toe pinch response incision make leave flank kpc cell inject 28gauge needle tail pancreas wind close two layer run 50 vicryl rapide suture ethicon body wall 50 prolene suture ethicon skin animal give buprenorphine 0.1 mg kg medvet international subcutaneous injection alleviate pain orthotopic surgery bp35 bil10 mouse deficiency p35 il10 restrict b cell obtain reconstitute lethally irradiate recipient mouse mixture bone marrow cell b celldeficient μmt mouse 80 p35 il10 wt mouse 20 extend data fig 4a b six week later chimera orthotopically inoculate tumour cell validation bwt bp35 bil10 chimera assess deletion p35 il10 gene restrict b cell splenic cd19 b cd3 cell purify bp35 bil10 correspond bwt chimera flow sort sort population remain cell b cell lysed genomic dna extract use dnaeasy kit qiagen per manufacturer 's instruction amount genomic dna present sample normalize use actb standard determine presence wt p35 il10 allele cell subset kpc cell 75,000 25 08l icecold pb mix 25 08l matrigel 354234 corn inject pancreas mouse receive 10 08g cgamp pb intravenous injection start day 8 tumour cell injection repeat every 3 day total four time dynamic time point experiment tumour collect day 11 17 21. breast cancer study 1 × 10 e0771 cell orthotopically inoculate lung cancer melanoma study 5 × 10 llc b16ova cell respectively subcutaneously inject right flank mouse b16ova tumourbearing mouse vaccinate 50 08g polyi cova day 6. tumour growth survival monitor antibody blockade study vivo mouse intraperitoneally inject 200 08g antiil35 clone v1.4c4.22 shenandoah twice week total three time start day 8 tumour injection 200 08g antiil10 clone jes52a5 bioxcell every 3 day four time igg isotype control start day 8 tumour injection study effect combination therapy antiil35 sting agonist deplete cd8 nk1.1 cell tumourbearing mouse treat describe receive 200 08g anticd8 clone yts 169.4 bioxcell antink clone pk136 bioxcell deplete antibody igg isotype control every 3 day start day 7. tumour collect day 21. mechanism nk cytotoxicity 50 08g trailneutralizing antibody clone n2b2 thermo fisher inject intratumorally every 3 day start day 7. tumour growth survival monitor singlecell suspension prepare isolate tumour spleen spleen mechanically disrupt resuspend 1 fbs pb process follow lysis red blood cell 00430054 thermo fisher isolation tumourinfiltrating lymphocyte tumour tissue mince piece 12 mm digest collagenase iv 1.25 mg ml ls004188 worthington 0.1 soybean trypsin inhibitor t9128 sigma hyaluronidase 1 mg ml ls002592 worthington dnase 100 mg ml ls002007 worthington dmem 30 min 37 °c cell suspension pass 70μm cell strainer falcon resuspend 2 fbs dmem medium lymphocyte isolate process tumour tissue ficoll density gradient centrifugation experiment isolation total cd45 leukocyte magneticactivated cell sort 130052301 mac miltenyi biotec perform leukocyteenriched fraction accord manufacturer 's protocol purity 90 achieve cell collect complete rpmi medium contain 10 fcs 1 penicillinstreptomycin ex vivo stimulation 10 single cell tumour spleen incubate pma 50 ng ml p8139 sigma ionomycin 200 ng ml i0634 sigma presence golgistop brefeldin 1× biolegend complete rpmi medium 4 h 37 °c cell wash block anticd16cd32 101320 biolegend 0.1 mg per 100,000 cell 5 min ice wash cell stain label cell surface antibody ice 30 min facs buffer pb 1 fbs 0.05 sodium azide viability assess use fixable viability ghost dye red 780 130865 tonbo stain cell wash fix permeabilized use cytofixcytoperm buffer 554714 bd bioscience 15 min 4 °c dark intracellular stain perform use fluorophoreconjugated cytokine antibody 1 h 4 °c dark intracellular stain cell wash resuspend facs buffer acquisition flow cytometry use facsdiva bd version 8.0.1. intracellular stain foxp3 perform use foxp3 stain kit 005523 ebioscience sample acquire attune nxt cytometer thermo fisher lsrii fortessa bd bioscience data analyse use flowjo version 10.6.2 bd bioscience human b cell human bd fc block 422301 biolegend 0.1 mg per 100,000 cell apply block antibody reagent list supplementary table 1. one million cell lysed ice 30 min use ripa lysis extraction buffer thermo fisher supplement protease inhibitor cocktail roche lysate centrifuge 16,000g 4 °c 10 min clarify supernatant load 412 nupage bistris gel thermo fisher transfer pvdf membrane biorad block 1 h 5 nonfat milk tbst buffer membrane incubate primary antibody block buffer overnight 4 °c wash five time membrane incubate secondary antibody 1 h room temperature protein detect use femto chemiluminescent reagent thermo scientific antibody list supplementary table 1. tumour spleen homogenate prepare use extraction buffer 100 mm tris ph 7.4 150 mm nacl 1 mm egta 1 mm edta 1 triton x100 0.5 sodium deoxycholate phosphatase inhibitor cocktail protease inhibitor cocktail phenylmethylsulfonyl fluoride sample incubate 4 °c 1 h orbital shaker supernatant collect centrifugation 9,000 r.p.m 10 min 4 °c sample store 80 °c concentration il35 il10 measure use legend max mouse il35 heterodimer elisa kit 440507 elisa max standard set mouse il10 kit 431414 accord manufacturer 's protocol biolegend rna prepare treat cell use rneasy mini kit 74106 qiagen trizol extraction 15596026 thermo fisher complementary dna generate use highcapacity cdna reverse transcription kit invitrogen realtime pcr analysis perform use universal sybr green supermix reagent biorad quantstudio 6 flex realtime pcr system thermo fisher result normalize actb expression gene expression determine δδc method 2δδc primer sequence list supplementary table 2. mouse splenic b cell sort use negative selection 130090862 130095130 miltenyi biotec spleen tumourbearing healthy mouse total b cell seed 96well flatbottom plate stimulate 5 08g ml antiigm cell seed stimulate 5 08g ml anticd3 2 08g ml anticd28 cell treat simultaneously without 5 08g ml cgamp experiment fig 2c b cell stimulate 5 08g ml antiigm 2 08g ml anticd40 2 08g ml lipopolysaccharide without 5 08g ml cgamp 24 h. experiment extend data fig 2hj b cell stimulate 5 08g ml antiigm increase do cgamp 0 1 5 10 08g ml 24 h. experiment fig 2d extend data fig 2k b cell stimulate 5 08g ml antiigm 5 08g ml dmxaa adus100 diabzi msa2 24 h. cell process flow cytometry rna evaluation mouse b cell first stimulate use 5 08g ml antiigm cgamp 12 h process analysis tumoral nk cell sort kpcbearing mouse facs cell sorter nk cell 3 × 10 seed 24well plate stimulate 100 ng ml mouse il35 chimf11135 chimerigen lab cell analyse facs stain mtt assay 10 kpc4662 cell seed stimulate cgamp 24 h 250 08g ml mtt add 4 h end point plate centrifuge supernatant discard dimethylsulfoxide 150 08l add dissolve pellet absorbance read optical density 590 nm incubation 100 ng ml il35 48 h nk92 mi cell subject ficoll density gradient centrifugation viable cell wash count add target k562 effector nk92 mi cell effectortarget ratio 5:1 2.5:1 0.5:1 0.25:1 96well ubottom plate 3 h coculture lactate dehydrogenase assay perform accord manufacturer 's instruction 11644793001 sigma aldrich study carry accordance university north carolina chapel hill school medicine washington university school medicine guideline approve institutional review board ethic committee respective institution study conduct accordance ethical standard declaration helsinki inform consent obtain patient healthy donor blood donation blood sample patient pdac collect washington university school medicine blood sample collect 15 patient pancreatic cancer 15 healthy control peripheral blood mononuclear cell obtain separate wholeblood sample density gradient centrifugation lymphoprep axisshield brief collect blood sample yellowtop acd tube 20 ml dilute equal volume 0.9 nacl carefully 20 ml dilute blood layer top 10 ml lymphoprep 50ml centrifuge tube avoid mix blood separation fluid centrifuge 800g 20 min 18 °c afterwards mononuclear cell remove samplemedium interface use pasteur pipette cell collect centrifugation 250g 5 min wash three time rpmi1640 medium human cd19 b cell patient pancreatic cancer healthy donor sort peripheral blood mononuclear cell stimulate use 5 08g ml antiigm 2 08g ml anticd40 without 5 08g ml cgamp 24 h. cell collect quantitative pcr assessment mrna expression chromatin immunoprecipitation assay perform describe previously brief splenic b cell isolate wt tmem173 mouse stimulate antiigm cgamp 24 h. activation cell collect crosslinked 37 wtvol formaldehyde final concentration 1.42 15 min room temperature formaldehyde quench carry 125 mm glycine 5 min room temperature cell lysis perform use immunoprecipitation buffer 150 mm nacl 50 mm trishcl ph 7.5 5 mm edta 0.5 volvol np40 1 volvol triton x100 0.1 phenylmethylsulfonyl fluoride phosphatase inhibitor chromatin shear fragment 5001,000 base pair four round 15 sonication pulse 2min rest round use diagenode bioruptor shear chromatin subject immunoprecipitation irf3 biolegend 12a4a35 1:50 dilute isotype control antibody biolegend 2735 follow overnight incubation rotation dnaprotein complex immunoprecipitated use protein aagarose bead millipore sigma 17528001 4 °c 1 h rotation wash immunoprecipitation buffer without inhibitor subject dna isolation perform use 10 wtvol chelex 100 biorad 1421253 slurry follow precipitation 70 ethanol purify dna use perform realtime pcr sybr green master mix 10 08l reaction volume 2.5 08l dna template 0.3 08l 10 08m primer pair 5 08l master mix 2.2 08l pcrgrade water relative occupancy immunoprecipitated factor target locus estimate use 2ccontrol csample method relative enrichment upstream bind transcriptional start site scale chromatin immunoprecipitation control isotype antibody input primer list supplementary table 2. rnaseq analysis total rna extract splenic b cell sort tumoral nk cell use rneasy mini kit qiagen 74106. rnaseq perform novogene corporation shenzhen guangdong u total amount 1 08g rna per sample use generate sequence library use nebnext ultra rna library prep kit illumina new england biolabs accord manufacturer 's recommendation briefly mrna purify total rna use polyt oligoattached magnetic bead firststrand cdna synthesize use random hexamer primer mmulv reverse transcriptase rnase h. secondstrand cdna synthesis perform use dna polymerase rnase h. remain overhang convert blunt end exonucleasepolymerase activity adenylation 3 end dna fragment nebnext adaptor hairpin loop structure ligate hybridization select cdna fragment preferable length 150200 base pair library fragment purify ampure xp system beckman coulter 3 08l user enzyme neb incubate sizeselected adaptorligated cdna 37 °c 15 min follow 5 min 95 °c pcr perform phusion highfidelity dna polymerase universal pcr primer index x primer finally pcr product purify ampure xp system library quality assess agilent bioanalyzer 2100 system clean data obtain remove read raw data contain adaptor polyn sequence read low quality use fastp default parameter downstream analysis base clean data high quality pairedend clean read align grcm38mm10 genome assembly mu musculus reference genome use software splice transcript alignment reference featurecounts use calculate read count gene base align file count matrix sample use perform differential expression analysis two condition group three biological replicate per condition use deseq2 ref r package result p value adjust use approach benjamini hochberg control false discovery rate gene adjust p 0.05 find deseq2 assign differentially express obtain gene expression value matrix sample also use featurecounts convert read count rpkm read per kilobase exon model per million map read value use r package pheatmap \<SEP>0